var cars = new Array();
<% for car in @cars -%>
  cars.push(new Array(<%= car.brand_id %>, '<%=h car.name %>', <%= car.id %>));
<% end -%>

function brandSelected() {
  brand_id = $('vehicle_brand_id').getValue();
  options = $('vehicle_car_id').options;
  options.length = 1;
  cars.each(function(car) {
    if (car[0] == brand_id) {
      options[options.length] = new Option(car[1], car[2]);
    }
  });
  if (options.length == 1) {
    $('car_field').hide();
  } else {
    $('car_field').show();
  }
}

document.observe('dom:loaded', function() {
  brandSelected();
  $('vehicle_brand_id').observe('change', brandSelected);
});